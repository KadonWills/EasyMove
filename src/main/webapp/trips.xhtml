<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./template.xhtml"
                xmlns:c="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">

        <h2 class="heading text-center text-uppercase">Trips</h2>
        
        <hr class="hr-dark" />
        
        <!-- Modal: add trip -->
        <div class="modal fade" id="add" tabindex="-1" role="modal" aria-labelledby="Add trip"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <!--Header-->
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">New trip</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <!--Body-->
                    <h:form class=" form-group">
                        <table class="col table ">
                            <tr>
                                <td>Departure :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            <input class="form-control mr-sm-2 col-md-9"  type="datetime-local"   value="#{tripsController.trips.departure}"></input> 
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>Arrival :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            <input class="form-control mr-sm-2 col-md-9" type="datetime-local" value="#{tripsController.trips.arrival}"></input> 
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>Departure agency :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            <!--this should display the agency of the connected agent-->
                                            <p:inputText class="form-control mr-sm-2 col-md-9" value="#{authController.currentAgent.getAgency }" disabled="true" />
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>Arrival agency :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            

                                        </div>
                                    </form>
                                </td>
                            </tr>

                            

                        </table>	  
                    </h:form>
                    <!--Footer-->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>
                        <h:commandButton class="btn btn-primary" value = "Add trip" 
                                         action = "#{tripsController.create}" />

                    </div>
                </div>
            </div>
        </div>
        <!-- Modal: add trip -->

        <!-- Modal: Update trip -->
        <div class="modal fade" id="update" tabindex="-1" role="modal" aria-labelledby="Update trip "
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <!--Header-->
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">Update trip  #{tripsController.trips.id}</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <!--Body-->
                    <h:form class=" form-group">
                        <table class="col table ">
                            <tr>
                                <td>Departure :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            <input class="form-control mr-sm-2 col-md-9"  type="datetime-local"   value="#{tripsController.trips.departure}"></input> 
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>Arrival :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            <input class="form-control mr-sm-2 col-md-9" type="datetime-local" value="#{tripsController.trips.arrival}"></input> 
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>Departure agency :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            <!--this should display the agency of the connected agent-->
                                            <p:inputText class="form-control mr-sm-2 col-md-9" value="#{authController.currentAgent.getAgency }" disabled="true" />
                                        </div>
                                    </form>
                                </td>
                            </tr>
                            <tr>
                                <td>Arrival agency :</td>
                                <td>
                                    <form class="form-inline ">
                                        <div class="md-form my-0 ">
                                            

                                        </div>
                                    </form>
                                </td>
                            </tr>

                            

                        </table>	 	  
                    </h:form>
                    <!--Footer-->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>                      
                        <h:commandButton class="btn btn-primary" value = "Update trip" 
                                         action = "#{tripsController.edit(tripsController.trips.getId)}" />

                    </div>
                </div>
            </div>
        </div>
        <!-- Modal: Update trip -->

        <!-- Modal: Delete trip -->
        <div class="modal shake " id="delete" tabindex="-1" role="dialog" aria-labelledby="Delete trip"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <!--Header-->
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">Deleting trip  #{tripsController.trips.name}</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <!--Body-->
                    <h:form class=" form-group text-center text-uppercase">
                        Are you sure ?
                    </h:form>
                    <!--Footer-->
                    <div class="modal-footer">

                        <button class="btn btn-danger" data-dismiss="modal"
                                onclick="#{tripsController.edit(tripsController.trips.getId)}" >
                            Delete trip
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal: Delete trip -->

        <!--/data table  for trips-->
        <div class="row">
            <h:form class="col-md-10">
                <h:dataTable value="#{tripsController.tripsList}" var="trips" border="0"
                             cellspacing="1" cellpadding="1" class="table table-hover " title="List of Agencies">
                    <h:column class="" >
                        <c:facet name="header" class="">Departure</c:facet>
                            #{trips.departure}
                    </h:column>
                    <h:column class="" >
                        <c:facet name="header" class="">Arrival</c:facet>
                            #{trips.arrival}
                    </h:column>
                    <h:column class="" >
                        <c:facet name="header" class="">From - To</c:facet>
                            #{trips.departure_agency} -> #{trips.arrival_agency}
                    </h:column>
                    <h:column class="" >
                        <c:facet name="header" class="">Type</c:facet>
                            #{trips.type}
                    </h:column>
                    <h:column class="" >
                        <c:facet name="header" class="">Price</c:facet>
                            #{trips.price}
                    </h:column>
                    <h:column class="" >
                        <c:facet name="header" class="">Buses</c:facet>
                            from BusTrip list (bus numbers)
                    </h:column>
                </h:dataTable>
            </h:form>
            <!--/data table  for trips-->
            <!-- Button trigger modal-->
            <div class="col-sm-12 col-md-2">
                <button type="button" class="col-md-10 col-sm-4  btn-outline-success  btn" data-toggle="modal" data-target="#add">
                    <i class="fa fa-plus "></i>
                </button>
                <button type="button" class="col-md-10 col-sm-4 btn-outline-primary  btn" data-toggle="modal" data-target="#update">
                    <i class="fa fa-edit "></i>
                </button>
                <button type="button" class="col-md-10 col-sm-4  btn-outline-danger  btn" data-toggle="modal" data-target="#delete">
                    <i class="fa fa-trash "></i>
                </button>
            </div>
        </div>


    </ui:define>
</ui:composition>

